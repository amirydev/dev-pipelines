
resources:
  - name: S_GoPublishBinary_0028_GitRepo
    type: GitRepo
    configuration:
      gitProvider: github_amirydev
      path: amirydev/dev-pipelines
      branches:
        include: feature-PIPE-5768

  - name: S_GoPublishBinary_0028_BuildInfo
    type: BuildInfo
    configuration:
      sourceArtifactory: myArti

pipelines:
  - name: pipeline_S_GoPublishBinary_0028
    steps:
      - name: S_GoPublishBinary_0028_1
        type: GoBuild
        configuration:
          environmentVariables:
            JFROG_CLI_BUILD_NAME: S_GoPublishBinary_0028_buildName
            JFROG_CLI_BUILD_NUMBER: ${run_id}
          inputResources:
            - name: S_GoPublishBinary_0028_GitRepo
          integrations:
            - name: myArti
          sourceLocation: "golang"
          resolverRepo: local-gen
      - name: S_GoPublishBinary_0028_2
        type: GoBuild
        configuration:
          environmentVariables:
            JFROG_CLI_BUILD_NAME: S_GoPublishBinary_0028_buildName
            JFROG_CLI_BUILD_NUMBER: ${run_id}
          inputResources:
            - name: S_GoPublishBinary_0028_GitRepo
          integrations:
            - name: myArti
          sourceLocation: "golang"
          resolverRepo: local-go
      - name: S_GoPublishBinary_0028_3
        type: GoPublishBinary
        configuration:
          inputSteps:
            - name: S_GoPublishBinary_0028_1
          outputResources:
            - name: S_GoPublishBinary_0028_BuildInfo
          targetRepository: local-gen
#          autoPublishBuildInfo: true
